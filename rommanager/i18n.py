"""Simple runtime i18n for R0MM UI."""

from __future__ import annotations

LANG_EN = "en"
LANG_PT_BR = "pt-BR"

_current_language = LANG_EN

_TRANSLATIONS = {
    LANG_EN: {
        "menu_file": "File",
        "menu_dats": "DATs",
        "menu_export": "Export",
        "menu_help": "Help",
        "menu_language": "Language",
        "language_english": "English",
        "language_ptbr": "PortuguÃªs (Brasil)",
        "menu_save_collection": "Save Collection...",
        "menu_open_collection": "Open Collection...",
        "menu_recent_collections": "Recent Collections",
        "menu_exit": "Exit",
        "menu_dat_library": "DAT Library...",
        "menu_export_missing_txt": "Export Missing (TXT)...",
        "menu_export_missing_csv": "Export Missing (CSV)...",
        "menu_export_missing_json": "Export Missing (JSON)...",
        "menu_settings": "Settings",
        "menu_about": "About",
        "title_main": "R0MM",
        "title_launcher": "R0MM",
        "choose_interface": "Choose your interface:",
        "launcher_flet": "âœ¨ Flet Desktop\n(Modern and responsive)",
        "launcher_tk": "ðŸ–¥ï¸ Tkinter Desktop\n(Simple, native)",
        "launcher_web": "ðŸŒ WebApp\n(Browser-based)",
        "launcher_cli": "âŒ¨ï¸ CLI\n(Command line in terminal)",
        "launcher_cli_start": "Starting CLI mode...",
        "launcher_web_start": "Starting Web Interface...",
        "launcher_tk_unavailable": "Tkinter not available. Starting Web Interface automatically...",
        "error_flet_unavailable": "Error: Flet interface is not available.",
        "install_flet": "Install it with: pip install flet",
        "error_tk_unavailable": "Error: Desktop GUI (tkinter) is not available.",
        "panel_dat_files": "DAT Files",
        "btn_add_dat": "Add DAT...",
        "btn_remove": "Remove",
        "btn_library": "Library...",
        "panel_scan": "Scan",
        "btn_select_folder": "Select Folder...",
        "btn_scan": "Scan",
        "panel_organize": "Organize",
        "btn_select_output": "Select Output...",
        "btn_preview": "Preview",
        "btn_organize": "Organize",
        "btn_undo": "Undo",
        "tab_identified": "Identified",
        "tab_unidentified": "Unidentified",
        "tab_missing": "Missing",
        "warning": "Warning",
        "error": "Error",
        "confirm": "Confirm",
        "loaded": "Loaded",
        "copy": "Copy",
        "copy_crc_question": "Copy CRC32? (No = copy names)",
        "warning_select_valid_folder": "Select a valid folder",
        "warning_load_dat_first": "Load at least one DAT first",
        "warning_select_output": "Select output folder",
        "about_title": "About",
        "settings_title": "Settings",
        "lang_changed": "Language updated. Some labels may require reopening dialogs.",

        "flet_brand": "R0MM",
        "flet_nav_dashboard": "Dashboard",
        "flet_nav_library": "Library",
        "flet_nav_import": "Import",
        "flet_nav_tools": "Tools",
        "flet_import_scan": "Import & Scan",
        "flet_dat_files": "DAT Files",
        "flet_dat_help": "Load No-Intro, Redump, or TOSEC XML DAT files to identify your ROMs.",
        "flet_add_dat": "Add DAT",
        "flet_remove_selected": "Remove Selected",
        "flet_scan_folder": "Scan Folder",
        "flet_scan_help": "Select a folder containing ROM files to scan and match against loaded DATs.",
        "flet_browse": "Browse",
        "flet_tools_logs": "Tools & Logs",
        "flet_organize_roms": "Organize ROMs",
        "flet_organize_help": "Arrange your identified ROMs using various organization strategies.",
        "flet_collections": "Collections",
        "flet_collections_help": "Save or load your session for later use.",
        "flet_activity_log": "Activity Log",
        "flet_no_folder": "No folder selected",
        "flet_no_output": "No output folder selected",

        "flet_total": "Total",
        "flet_collection_completeness": "Collection Completeness",
        "flet_open_folder": "Open Folder",
        "flet_copy_crc": "Copy CRC32",
        "flet_crc_copied": "CRC32 copied to clipboard!",
        "flet_preview": "Preview",
        "flet_organize": "Organize",
        "flet_undo_last": "Undo Last",
        "flet_save": "Save",
        "flet_load": "Load",


        "browse": "Browse...",
        "none": "(none)",
        "force_to_identified": "Force to Identified",
        "copy_to_clipboard": "Copy to Clipboard",
        "system": "System",
        "action": "Action",
        "scan_archives": "Scan archives",
        "flet_search_games": "Search games...",
        "flet_library_empty_title": "Your library is empty",
        "flet_library_empty_desc": "Import a DAT file and scan a folder to see your ROMs here.",
        "flet_identified": "identified",
        "flet_unidentified": "unidentified",
        "flet_collection_name": "Collection name",

        "tip_add_dat": "Add a DAT XML file to the active matching list.",
        "tip_remove_dat": "Remove the selected DAT from the current list.",
        "tip_open_dat_library": "Open the DAT library to manage saved DAT entries.",
        "tip_select_rom_folder": "Choose the folder that contains ROM files to scan.",
        "tip_start_scan": "Start scanning files and try to identify them against loaded DATs.",
        "tip_scan_archives": "Also inspect files inside ZIP archives during scan.",
        "tip_recursive_scan": "Include subfolders when scanning for ROM files.",
        "tip_blindmatch_toggle": "Enable no-DAT best-effort matching using filenames.",
        "tip_blindmatch_system": "System name used for BlindMatch results (example: SNES).",
        "tip_force_identified": "Move selected unidentified files to identified results.",
        "tip_refresh_missing": "Recalculate missing ROM entries from current DATs and results.",
        "tip_search_archive": "Open an Archive.org search for the selected item or missing set.",
        "tip_select_output_folder": "Choose where organized files will be copied or moved.",
        "tip_preview_organization": "Show a preview of destination paths before organizing files.",
        "tip_organize_now": "Execute file organization using the selected strategy and action.",
        "tip_undo_last": "Undo the last organization operation when possible.",
        "tip_choose_strategy": "Choose how identified ROM files will be organized into folders.",
        "tip_choose_action": "Choose whether files are copied or moved during organization.",
        "tip_action_copy": "Copy files to output and keep originals in place.",
        "tip_action_move": "Move files to output and remove them from source folder.",
        "tip_save_collection": "Save current DATs, scan results, and settings to a collection file.",
        "tip_open_collection": "Load a previously saved collection file.",
        "no_dats_loaded": "No DATs loaded",
        "no_folder_selected": "No folder selected",
        "scan_inside_zips": "Scan inside ZIPs",
        "recursive": "Recursive",
        "search": "Search:",
        "tab_unidentified_files": "Unidentified Files",
        "tab_missing_roms": "Missing ROMs",
        "refresh": "Refresh",
        "search_archive": "Search Archive.org",
        "selection_empty": "",
        "completeness_hint": "Load DATs and scan to see missing ROMs",
        "stats_no_files": "No files scanned",
        "organization": "Organization",
        "strategy": "Strategy:",
        "output": "Output:",
        "copy_action": "Copy",
        "move_action": "Move",
        "organize_now": "Organize!",
        "unidentified_to_missing": "Move to Missing",
        "confirm_remove_library": "Remove from library?",
        "settings_coming": "Settings dialog coming soon!",
        "about_text": "R0MM v2\n\nOrganize ROM collections using DAT files.\nSupports No-Intro, Redump, TOSEC, etc.",
        "dat_sources": "DAT Sources",
        "open_page": "Open Page",
        "load_selected": "Load Selected",
        "import_dat": "Import DAT...",
        "select_dat_file": "Select DAT File",
        "select_rom_folder": "Select ROM Folder",
        "select_output_folder": "Select Output Folder",
        "copied": "Copied",
        "copied_crc": "CRC32 copied: {value}",
        "copied_name": "Copied: {value}",
        "info": "Info",
        "missing_no_local_paths": "Missing ROMs don't have local paths.",
        "done": "Done",
        "failed": "Failed",
        "scanned_summary": "Scanned {count}\nIdentified: {identified}\nUnidentified: {unidentified}",
        "select_missing_first": "Select missing ROMs first",
        "select_files_force": "Select files to force",
        "no_identified": "No identified ROMs",
        "organization_preview": "Organization Preview",
        "files_size": "Files: {files} | Size: {size}",
        "organized_count": "Organized {count} ROMs!",
        "nothing_to_undo": "Nothing to undo",
        "undo_last_org": "Undo last organization?",
        "undo_complete": "Undo complete",
        "load_dats_scan_first": "Load DATs and scan first",
        "export_missing_roms": "Export Missing ROMs",
        "dat_library": "DAT Library",

        "open_folder": "Open Folder",
        "copy_crc32": "Copy CRC32",
        "move_to_missing_confirm": "Move {count} unidentified item(s) to Missing ROMs?",
        "flet_no_identified_to_organize": "No identified ROMs to organize.",
    },
    LANG_PT_BR: {
        "menu_file": "Arquivo",
        "menu_dats": "DATs",
        "menu_export": "Exportar",
        "menu_help": "Ajuda",
        "menu_language": "Idioma",
        "language_english": "English",
        "language_ptbr": "PortuguÃªs (Brasil)",
        "menu_save_collection": "Salvar ColeÃ§Ã£o...",
        "menu_open_collection": "Abrir ColeÃ§Ã£o...",
        "menu_recent_collections": "ColeÃ§Ãµes Recentes",
        "menu_exit": "Sair",
        "menu_dat_library": "Biblioteca de DAT...",
        "menu_export_missing_txt": "Exportar Faltantes (TXT)...",
        "menu_export_missing_csv": "Exportar Faltantes (CSV)...",
        "menu_export_missing_json": "Exportar Faltantes (JSON)...",
        "menu_settings": "ConfiguraÃ§Ãµes",
        "menu_about": "Sobre",
        "title_main": "R0MM",
        "title_launcher": "R0MM",
        "choose_interface": "Escolha sua interface:",
        "launcher_flet": "âœ¨ Desktop Flet\n(Moderno e responsivo)",
        "launcher_tk": "ðŸ–¥ï¸ Desktop Tkinter\n(Simples e nativo)",
        "launcher_web": "ðŸŒ WebApp\n(Pelo navegador)",
        "launcher_cli": "âŒ¨ï¸ CLI\n(Linha de comando no terminal)",
        "launcher_cli_start": "Iniciando modo CLI...",
        "launcher_web_start": "Iniciando Interface Web...",
        "launcher_tk_unavailable": "Tkinter indisponÃ­vel. Iniciando Interface Web automaticamente...",
        "error_flet_unavailable": "Erro: a interface Flet nÃ£o estÃ¡ disponÃ­vel.",
        "install_flet": "Instale com: pip install flet",
        "error_tk_unavailable": "Erro: GUI Desktop (tkinter) nÃ£o estÃ¡ disponÃ­vel.",
        "panel_dat_files": "Arquivos DAT",
        "btn_add_dat": "Adicionar DAT...",
        "btn_remove": "Remover",
        "btn_library": "Biblioteca...",
        "panel_scan": "Varredura",
        "btn_select_folder": "Selecionar Pasta...",
        "btn_scan": "Escanear",
        "panel_organize": "Organizar",
        "btn_select_output": "Selecionar SaÃ­da...",
        "btn_preview": "PrÃ©-visualizar",
        "btn_organize": "Organizar",
        "btn_undo": "Desfazer",
        "tab_identified": "Identificados",
        "tab_unidentified": "NÃ£o Identificados",
        "tab_missing": "Faltantes",
        "warning": "Aviso",
        "error": "Erro",
        "confirm": "ConfirmaÃ§Ã£o",
        "loaded": "Carregado",
        "copy": "Copiar",
        "copy_crc_question": "Copiar CRC32? (NÃ£o = copiar nomes)",
        "warning_select_valid_folder": "Selecione uma pasta vÃ¡lida",
        "warning_load_dat_first": "Carregue ao menos um DAT primeiro",
        "warning_select_output": "Selecione a pasta de saÃ­da",
        "about_title": "Sobre",
        "settings_title": "ConfiguraÃ§Ãµes",
        "lang_changed": "Idioma atualizado. Alguns rÃ³tulos podem exigir reabrir diÃ¡logos.",

        "flet_brand": "R0MM",
        "flet_nav_dashboard": "Painel",
        "flet_nav_library": "Biblioteca",
        "flet_nav_import": "Importar",
        "flet_nav_tools": "Ferramentas",
        "flet_import_scan": "Importar e Escanear",
        "flet_dat_files": "Arquivos DAT",
        "flet_dat_help": "Carregue arquivos DAT XML No-Intro, Redump ou TOSEC para identificar suas ROMs.",
        "flet_add_dat": "Adicionar DAT",
        "flet_remove_selected": "Remover Selecionado",
        "flet_scan_folder": "Escanear Pasta",
        "flet_scan_help": "Selecione uma pasta com ROMs para escanear e comparar com os DATs carregados.",
        "flet_browse": "Procurar",
        "flet_tools_logs": "Ferramentas e Logs",
        "flet_organize_roms": "Organizar ROMs",
        "flet_organize_help": "Organize suas ROMs identificadas usando diferentes estratÃ©gias.",
        "flet_collections": "ColeÃ§Ãµes",
        "flet_collections_help": "Salve ou carregue sua sessÃ£o para uso posterior.",
        "flet_activity_log": "Log de Atividades",
        "flet_no_folder": "Nenhuma pasta selecionada",
        "flet_no_output": "Nenhuma pasta de saÃ­da selecionada",

        "flet_total": "Total",
        "flet_collection_completeness": "Completude da ColeÃ§Ã£o",
        "flet_open_folder": "Abrir Pasta",
        "flet_copy_crc": "Copiar CRC32",
        "flet_crc_copied": "CRC32 copiado para a Ã¡rea de transferÃªncia!",
        "flet_preview": "PrÃ©via",
        "flet_organize": "Organizar",
        "flet_undo_last": "Desfazer Ãšltimo",
        "flet_save": "Salvar",
        "flet_load": "Carregar",


        "browse": "Procurar...",
        "none": "(nenhum)",
        "force_to_identified": "ForÃ§ar para Identificado",
        "copy_to_clipboard": "Copiar para a Ãrea de TransferÃªncia",
        "system": "Sistema",
        "action": "AÃ§Ã£o",
        "scan_archives": "Escanear arquivos compactados",
        "flet_search_games": "Buscar jogos...",
        "flet_library_empty_title": "Sua biblioteca estÃ¡ vazia",
        "flet_library_empty_desc": "Importe um arquivo DAT e escaneie uma pasta para ver suas ROMs aqui.",
        "flet_identified": "identificados",
        "flet_unidentified": "nÃ£o identificados",
        "flet_collection_name": "Nome da coleÃ§Ã£o",

        "tip_add_dat": "Adiciona um arquivo DAT XML Ã  lista de correspondÃªncia ativa.",
        "tip_remove_dat": "Remove o DAT selecionado da lista atual.",
        "tip_open_dat_library": "Abre a biblioteca de DAT para gerenciar entradas salvas.",
        "tip_select_rom_folder": "Escolha a pasta que contÃ©m os arquivos de ROM para escanear.",
        "tip_start_scan": "Inicia a varredura dos arquivos e tenta identificÃ¡-los com os DATs carregados.",
        "tip_scan_archives": "TambÃ©m inspeciona arquivos dentro de ZIPs durante a varredura.",
        "tip_recursive_scan": "Inclui subpastas ao procurar arquivos de ROM.",
        "tip_blindmatch_toggle": "Ativa correspondÃªncia sem DAT por melhor esforÃ§o usando nomes de arquivo.",
        "tip_blindmatch_system": "Nome do sistema usado nos resultados de BlindMatch (exemplo: SNES).",
        "tip_force_identified": "Move os arquivos nÃ£o identificados selecionados para identificados.",
        "tip_refresh_missing": "Recalcula ROMs faltantes com base nos DATs e resultados atuais.",
        "tip_search_archive": "Abre uma busca no Archive.org para o item selecionado ou lista faltante.",
        "tip_select_output_folder": "Escolha onde os arquivos organizados serÃ£o copiados ou movidos.",
        "tip_preview_organization": "Mostra uma prÃ©via dos caminhos de destino antes de organizar.",
        "tip_organize_now": "Executa a organizaÃ§Ã£o usando a estratÃ©gia e aÃ§Ã£o selecionadas.",
        "tip_undo_last": "Desfaz a Ãºltima operaÃ§Ã£o de organizaÃ§Ã£o quando possÃ­vel.",
        "tip_choose_strategy": "Escolha como as ROMs identificadas serÃ£o organizadas em pastas.",
        "tip_choose_action": "Escolha se os arquivos serÃ£o copiados ou movidos na organizaÃ§Ã£o.",
        "tip_action_copy": "Copia arquivos para a saÃ­da e mantÃ©m os originais no local.",
        "tip_action_move": "Move arquivos para a saÃ­da e remove da pasta de origem.",
        "tip_save_collection": "Salva DATs, resultados e configuraÃ§Ãµes atuais em um arquivo de coleÃ§Ã£o.",
        "tip_open_collection": "Carrega um arquivo de coleÃ§Ã£o salvo anteriormente.",
        "no_dats_loaded": "Nenhum DAT carregado",
        "no_folder_selected": "Nenhuma pasta selecionada",
        "scan_inside_zips": "Escanear dentro de ZIPs",
        "recursive": "Recursivo",
        "search": "Buscar:",
        "tab_unidentified_files": "Arquivos NÃ£o Identificados",
        "tab_missing_roms": "ROMs Faltantes",
        "refresh": "Atualizar",
        "search_archive": "Buscar no Archive.org",
        "selection_empty": "",
        "completeness_hint": "Carregue DATs e escaneie para ver ROMs faltantes",
        "stats_no_files": "Nenhum arquivo escaneado",
        "organization": "OrganizaÃ§Ã£o",
        "strategy": "EstratÃ©gia:",
        "output": "SaÃ­da:",
        "copy_action": "Copiar",
        "move_action": "Mover",
        "organize_now": "Organizar!",
        "unidentified_to_missing": "Mover para Faltantes",
        "confirm_remove_library": "Remover da biblioteca?",
        "settings_coming": "Tela de configuraÃ§Ãµes em breve!",
        "about_text": "R0MM v2\n\nOrganize coleÃ§Ãµes de ROM usando arquivos DAT.\nSuporta No-Intro, Redump, TOSEC etc.",
        "dat_sources": "Fontes de DAT",
        "open_page": "Abrir PÃ¡gina",
        "load_selected": "Carregar Selecionado",
        "import_dat": "Importar DAT...",
        "select_dat_file": "Selecionar Arquivo DAT",
        "select_rom_folder": "Selecionar Pasta de ROMs",
        "select_output_folder": "Selecionar Pasta de SaÃ­da",
        "copied": "Copiado",
        "copied_crc": "CRC32 copiado: {value}",
        "copied_name": "Copiado: {value}",
        "info": "InformaÃ§Ã£o",
        "missing_no_local_paths": "ROMs faltantes nÃ£o tÃªm caminhos locais.",
        "done": "ConcluÃ­do",
        "failed": "Falhou",
        "scanned_summary": "Escaneado {count}\nIdentificados: {identified}\nNÃ£o identificados: {unidentified}",
        "select_missing_first": "Selecione ROMs faltantes primeiro",
        "select_files_force": "Selecione arquivos para forÃ§ar",
        "no_identified": "Nenhuma ROM identificada",
        "organization_preview": "PrÃ©via da OrganizaÃ§Ã£o",
        "files_size": "Arquivos: {files} | Tamanho: {size}",
        "organized_count": "{count} ROMs organizadas!",
        "nothing_to_undo": "Nada para desfazer",
        "undo_last_org": "Desfazer Ãºltima organizaÃ§Ã£o?",
        "undo_complete": "Desfazer concluÃ­do",
        "load_dats_scan_first": "Carregue DATs e escaneie primeiro",
        "export_missing_roms": "Exportar ROMs Faltantes",
        "dat_library": "Biblioteca de DAT",

        "open_folder": "Abrir Pasta",
        "copy_crc32": "Copiar CRC32",
        "move_to_missing_confirm": "Mover {count} item(ns) nÃ£o identificados para ROMs Faltantes?",
        "flet_no_identified_to_organize": "Nenhuma ROM identificada para organizar.",
    },
}


def set_language(language: str) -> None:
    global _current_language
    if language in _TRANSLATIONS:
        _current_language = language


def get_language() -> str:
    return _current_language


def tr(key: str, **kwargs) -> str:
    lang_map = _TRANSLATIONS.get(_current_language, _TRANSLATIONS[LANG_EN])
    text = lang_map.get(key, _TRANSLATIONS[LANG_EN].get(key, key))
    if kwargs:
        return text.format(**kwargs)
    return text
