"""Simple runtime i18n for ROM Manager UI."""

from __future__ import annotations

LANG_EN = "en"
LANG_PT_BR = "pt-BR"

_current_language = LANG_EN

_TRANSLATIONS = {
    LANG_EN: {
        "menu_file": "File",
        "menu_dats": "DATs",
        "menu_export": "Export",
        "menu_help": "Help",
        "menu_language": "Language",
        "language_english": "English",
        "language_ptbr": "PortuguÃªs (Brasil)",
        "menu_save_collection": "Save Collection...",
        "menu_open_collection": "Open Collection...",
        "menu_recent_collections": "Recent Collections",
        "menu_exit": "Exit",
        "menu_dat_library": "DAT Library...",
        "menu_export_missing_txt": "Export Missing (TXT)...",
        "menu_export_missing_csv": "Export Missing (CSV)...",
        "menu_export_missing_json": "Export Missing (JSON)...",
        "menu_settings": "Settings",
        "menu_about": "About",
        "title_main": "ROM Collection Manager",
        "title_launcher": "ROM Manager",
        "choose_interface": "Choose your interface:",
        "launcher_flet": "âœ¨ Flet Desktop\n(Modern and responsive)",
        "launcher_tk": "ðŸ–¥ï¸ Tkinter Desktop\n(Simple, native)",
        "launcher_web": "ðŸŒ WebApp\n(Browser-based)",
        "launcher_cli": "âŒ¨ï¸ CLI\n(Command line in terminal)",
        "launcher_cli_start": "Starting CLI mode...",
        "launcher_web_start": "Starting Web Interface...",
        "launcher_tk_unavailable": "Tkinter not available. Starting Web Interface automatically...",
        "error_flet_unavailable": "Error: Flet interface is not available.",
        "install_flet": "Install it with: pip install flet",
        "error_tk_unavailable": "Error: Desktop GUI (tkinter) is not available.",
        "panel_dat_files": "DAT Files",
        "btn_add_dat": "Add DAT...",
        "btn_remove": "Remove",
        "btn_library": "Library...",
        "panel_scan": "Scan",
        "btn_select_folder": "Select Folder...",
        "btn_scan": "Scan",
        "panel_organize": "Organize",
        "btn_select_output": "Select Output...",
        "btn_preview": "Preview",
        "btn_organize": "Organize",
        "btn_undo": "Undo",
        "tab_identified": "Identified",
        "tab_unidentified": "Unidentified",
        "tab_missing": "Missing",
        "warning": "Warning",
        "error": "Error",
        "confirm": "Confirm",
        "loaded": "Loaded",
        "copy": "Copy",
        "copy_crc_question": "Copy CRC32? (No = copy names)",
        "warning_select_valid_folder": "Select a valid folder",
        "warning_load_dat_first": "Load at least one DAT first",
        "warning_select_output": "Select output folder",
        "about_title": "About",
        "settings_title": "Settings",
        "lang_changed": "Language updated. Some labels may require reopening dialogs.",

        "flet_brand": "RetroFlow",
        "flet_nav_dashboard": "Dashboard",
        "flet_nav_library": "Library",
        "flet_nav_import": "Import",
        "flet_nav_tools": "Tools",
        "flet_import_scan": "Import & Scan",
        "flet_dat_files": "DAT Files",
        "flet_dat_help": "Load No-Intro, Redump, or TOSEC XML DAT files to identify your ROMs.",
        "flet_add_dat": "Add DAT",
        "flet_remove_selected": "Remove Selected",
        "flet_scan_folder": "Scan Folder",
        "flet_scan_help": "Select a folder containing ROM files to scan and match against loaded DATs.",
        "flet_browse": "Browse",
        "flet_tools_logs": "Tools & Logs",
        "flet_organize_roms": "Organize ROMs",
        "flet_organize_help": "Arrange your identified ROMs using various organization strategies.",
        "flet_collections": "Collections",
        "flet_collections_help": "Save or load your session for later use.",
        "flet_activity_log": "Activity Log",
        "flet_no_folder": "No folder selected",
        "flet_no_output": "No output folder selected",
    },
    LANG_PT_BR: {
        "menu_file": "Arquivo",
        "menu_dats": "DATs",
        "menu_export": "Exportar",
        "menu_help": "Ajuda",
        "menu_language": "Idioma",
        "language_english": "English",
        "language_ptbr": "PortuguÃªs (Brasil)",
        "menu_save_collection": "Salvar ColeÃ§Ã£o...",
        "menu_open_collection": "Abrir ColeÃ§Ã£o...",
        "menu_recent_collections": "ColeÃ§Ãµes Recentes",
        "menu_exit": "Sair",
        "menu_dat_library": "Biblioteca de DAT...",
        "menu_export_missing_txt": "Exportar Faltantes (TXT)...",
        "menu_export_missing_csv": "Exportar Faltantes (CSV)...",
        "menu_export_missing_json": "Exportar Faltantes (JSON)...",
        "menu_settings": "ConfiguraÃ§Ãµes",
        "menu_about": "Sobre",
        "title_main": "Gerenciador de ColeÃ§Ã£o de ROMs",
        "title_launcher": "Gerenciador de ROMs",
        "choose_interface": "Escolha sua interface:",
        "launcher_flet": "âœ¨ Desktop Flet\n(Moderno e responsivo)",
        "launcher_tk": "ðŸ–¥ï¸ Desktop Tkinter\n(Simples e nativo)",
        "launcher_web": "ðŸŒ WebApp\n(Pelo navegador)",
        "launcher_cli": "âŒ¨ï¸ CLI\n(Linha de comando no terminal)",
        "launcher_cli_start": "Iniciando modo CLI...",
        "launcher_web_start": "Iniciando Interface Web...",
        "launcher_tk_unavailable": "Tkinter indisponÃ­vel. Iniciando Interface Web automaticamente...",
        "error_flet_unavailable": "Erro: a interface Flet nÃ£o estÃ¡ disponÃ­vel.",
        "install_flet": "Instale com: pip install flet",
        "error_tk_unavailable": "Erro: GUI Desktop (tkinter) nÃ£o estÃ¡ disponÃ­vel.",
        "panel_dat_files": "Arquivos DAT",
        "btn_add_dat": "Adicionar DAT...",
        "btn_remove": "Remover",
        "btn_library": "Biblioteca...",
        "panel_scan": "Varredura",
        "btn_select_folder": "Selecionar Pasta...",
        "btn_scan": "Escanear",
        "panel_organize": "Organizar",
        "btn_select_output": "Selecionar SaÃ­da...",
        "btn_preview": "PrÃ©-visualizar",
        "btn_organize": "Organizar",
        "btn_undo": "Desfazer",
        "tab_identified": "Identificados",
        "tab_unidentified": "NÃ£o Identificados",
        "tab_missing": "Faltantes",
        "warning": "Aviso",
        "error": "Erro",
        "confirm": "ConfirmaÃ§Ã£o",
        "loaded": "Carregado",
        "copy": "Copiar",
        "copy_crc_question": "Copiar CRC32? (NÃ£o = copiar nomes)",
        "warning_select_valid_folder": "Selecione uma pasta vÃ¡lida",
        "warning_load_dat_first": "Carregue ao menos um DAT primeiro",
        "warning_select_output": "Selecione a pasta de saÃ­da",
        "about_title": "Sobre",
        "settings_title": "ConfiguraÃ§Ãµes",
        "lang_changed": "Idioma atualizado. Alguns rÃ³tulos podem exigir reabrir diÃ¡logos.",

        "flet_brand": "RetroFlow",
        "flet_nav_dashboard": "Painel",
        "flet_nav_library": "Biblioteca",
        "flet_nav_import": "Importar",
        "flet_nav_tools": "Ferramentas",
        "flet_import_scan": "Importar e Escanear",
        "flet_dat_files": "Arquivos DAT",
        "flet_dat_help": "Carregue arquivos DAT XML No-Intro, Redump ou TOSEC para identificar suas ROMs.",
        "flet_add_dat": "Adicionar DAT",
        "flet_remove_selected": "Remover Selecionado",
        "flet_scan_folder": "Escanear Pasta",
        "flet_scan_help": "Selecione uma pasta com ROMs para escanear e comparar com os DATs carregados.",
        "flet_browse": "Procurar",
        "flet_tools_logs": "Ferramentas e Logs",
        "flet_organize_roms": "Organizar ROMs",
        "flet_organize_help": "Organize suas ROMs identificadas usando diferentes estratÃ©gias.",
        "flet_collections": "ColeÃ§Ãµes",
        "flet_collections_help": "Salve ou carregue sua sessÃ£o para uso posterior.",
        "flet_activity_log": "Log de Atividades",
        "flet_no_folder": "Nenhuma pasta selecionada",
        "flet_no_output": "Nenhuma pasta de saÃ­da selecionada",
    },
}


def set_language(language: str) -> None:
    global _current_language
    if language in _TRANSLATIONS:
        _current_language = language


def get_language() -> str:
    return _current_language


def tr(key: str, **kwargs) -> str:
    lang_map = _TRANSLATIONS.get(_current_language, _TRANSLATIONS[LANG_EN])
    text = lang_map.get(key, _TRANSLATIONS[LANG_EN].get(key, key))
    if kwargs:
        return text.format(**kwargs)
    return text
